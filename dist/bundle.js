(()=>{"use strict";var t={127:(t,e,o)=>{o.d(e,{Z:()=>h});var r=o(670);function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.colours={},this.status=null,this.direction=null,this.colours.active="green",this.colours.disabled="black",this.colours.locked="red",this.status="disabled",this.direction=e}var e,r;return e=t,(r=[{key:"draw",value:function(){switch(this.direction){case"up":this.upDoor();break;case"right":this.rightDoor();break;case"down":this.downDoor();break;case"left":this.leftDoor()}}},{key:"upDoor",value:function(){o.g.background.ctx.beginPath(),o.g.background.ctx.strokeStyle=this.colours[this.status],o.g.background.ctx.moveTo(o.g.background.doorMin,0),o.g.background.ctx.lineTo(o.g.background.doorMax,0),o.g.background.ctx.stroke()}},{key:"rightDoor",value:function(){o.g.background.ctx.beginPath(),o.g.background.ctx.strokeStyle=this.colours[this.status],o.g.background.ctx.moveTo(o.g.background.canvas.width,o.g.background.doorMin),o.g.background.ctx.lineTo(o.g.background.canvas.width,o.g.background.doorMax),o.g.background.ctx.stroke()}},{key:"downDoor",value:function(){o.g.background.ctx.beginPath(),o.g.background.ctx.strokeStyle=this.colours[this.status],o.g.background.ctx.moveTo(o.g.background.doorMax,o.g.background.canvas.height),o.g.background.ctx.lineTo(o.g.background.doorMin,o.g.background.canvas.height),o.g.background.ctx.stroke()}},{key:"leftDoor",value:function(){o.g.background.ctx.beginPath(),o.g.background.ctx.strokeStyle=this.colours[this.status],o.g.background.ctx.moveTo(0,o.g.background.doorMax),o.g.background.ctx.lineTo(0,o.g.background.doorMin),o.g.background.ctx.stroke()}}])&&n(e.prototype,r),t}(),a=o(820);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(y,t);var e,r,n,c,h=(n=y,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(c){var o=f(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return l(this,t)});function y(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(t=h.call(this)).canvasRect=null,t.canvas=document.getElementById("canvas-background"),t.ctx=t.canvas.getContext("2d"),t.canvas.width=t.dimensions,t.canvas.height=t.dimensions,t.doorMin=t.dimensions*(5/12),t.doorMax=t.dimensions*(7/12),t.canvasRect=t.canvas.getBoundingClientRect(),t}return e=y,(r=[{key:"draw",value:function(){this.clear();var t=o.g.player.room;this.ctx.lineWidth=20,this.drawWalls(),this.drawDoors(t),this.drawMarkers()}},{key:"drawWalls",value:function(){this.ctx.beginPath(),this.ctx.strokeStyle="black",this.ctx.moveTo(0,0),this.ctx.lineTo(this.doorMin,0),this.ctx.moveTo(this.doorMax,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.doorMin),this.ctx.moveTo(this.canvas.width,this.doorMax),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(this.doorMax,this.canvas.height),this.ctx.moveTo(this.doorMin,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,this.doorMax),this.ctx.moveTo(0,this.doorMin),this.ctx.lineTo(0,0),this.ctx.stroke()}},{key:"drawDoors",value:function(t){var e=new i("up"),o=new i("right"),r=new i("down"),n=new i("left");a.Z.rooms[t].up&&(e.status="active"),a.Z.rooms[t].right&&(o.status="active"),a.Z.rooms[t].down&&(r.status="active"),a.Z.rooms[t].left&&(n.status="active"),e.draw(),o.draw(),r.draw(),n.draw()}},{key:"drawMarkers",value:function(){var t=this;Object.keys(a.Z.rooms[o.g.player.room].markers).forEach((function(e){var r=a.Z.rooms[o.g.player.room].markers[e];t.ctx.beginPath(),t.ctx.arc(r.x,r.y,r.radius,0,2*Math.PI),t.ctx.fillStyle="blue",t.ctx.fill()}))}}])&&u(e.prototype,r),y}(r.Z)},670:(t,e,o)=>{function r(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o.d(e,{Z:()=>n});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.ctx=null,this.dimensions=null,this.doorMin=null,this.doorMax=null,this.dimensions=.8*window.innerHeight,$(".background-image").width(this.dimensions/2),$(".background-image").height(this.dimensions/2)}var e,o;return e=t,(o=[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}])&&r(e.prototype,o),t}()},931:(t,e,o)=>{o.d(e,{Z:()=>r});var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.x=0,this.y=0,this.radius=0,this.overlay=!1}},548:(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(f,t);var e,r,u,s,l=(u=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(u);if(s){var o=c(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return a(this,t)});function f(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=l.call(this)).used=!1,t.setRandomPosition(),t}return e=f,(r=[{key:"setRandomPosition",value:function(){var t=o.g.background.canvas.width,e=o.g.background.canvas.height;this.x=Math.floor(Math.random()*(.6*t))+.2*t,this.y=Math.floor(Math.random()*(.6*e))+.2*t}},{key:"update",value:function(){this.detectHit()}},{key:"hit",value:function(t){return Math.pow(this.radius-t.radius,2)<=Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)&&Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)<=Math.pow(this.radius+t.radius,2)}}])&&n(e.prototype,r),f}(o(557).Z)},557:(t,e,o)=>{o.d(e,{Z:()=>l});var r=o(931),n=o(820);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,r,i,l,f=(i=h,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(i);if(l){var o=s(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return u(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=f.call(this)).speed=0,t.dx=0,t.dy=0,t.wallHit=!1,t.type=null,t}return e=h,(r=[{key:"move",value:function(){if(this.wallHit=this.getWallHit(),!1===this.wallHit)"Enemy"==this.type?(this.x+=this.speed*this.dx,this.y+=this.speed*this.dy):(this.x+=this.dx,this.y+=this.dy);else if("Projectile"===this.type)delete o.g.player.projectiles[this.id];else if("Player"==this.type){var t=this.hitDoor();!1!==t&&(o.g.player.room=n.Z.rooms[o.g.player.room].changeRoom(t.direction),o.g.background.draw(),this.x=t.x,this.y=t.y)}else"Enemy"==this.type&&("up"===this.wallHit||"down"===this.wallHit?this.dy*=-1:"right"!==this.wallHit&&"left"!==this.wallHit||(this.dx*=-1),this.x+=this.speed*this.dx,this.y+=this.speed*this.dy)}},{key:"getWallHit",value:function(){return this.x+this.radius+this.dx>o.g.background.canvas.width-o.g.background.ctx.lineWidth?"right":this.x-this.radius+this.dx<0+o.g.background.ctx.lineWidth?"left":this.y+this.radius+this.dy>o.g.background.canvas.height-o.g.background.ctx.lineWidth?"down":this.y-this.radius+this.dy<0+o.g.background.ctx.lineWidth&&"up"}},{key:"variableBetweenValues",value:function(t,e,o){return t>=e&&t<=o}}])&&a(e.prototype,r),h}(r.Z)},820:(t,e,o)=>{o.d(e,{Z:()=>P});var r=o(931),n=o(548);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,r,n,i,l=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(i){var o=s(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return u(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this)).value=0,e.id=t,e.value=100*Math.floor(9*Math.random())+100,e.radius=o.g.background.canvas.height/20,e}return e=f,(r=[{key:"detectHit",value:function(){this.hit(o.g.player)&&!1===this.used&&(this.used=!0,o.g.player.updateScore(this.value),delete P.rooms[o.g.player.room].treasure[this.id])}}])&&a(e.prototype,r),f}(n.Z);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,t);var e,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var o=d(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return p(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).levels={1:[7,1],2:[10,2],3:[15,3],4:[20,4],5:[25,5]},e.level=null,e.id=t,e.type="Enemy",e.level=Math.floor(5*Math.random())+1,e.radius=e.levels[e.level][0],e.speed=e.levels[e.level][1],e.dx=1,e.dy=1,e.setRandomDirection(),e}return e=c,(r=[{key:"setRandomDirection",value:function(){this.dx*=Math.pow(-1,Math.floor(10*Math.random())),this.dy*=Math.pow(-1,Math.floor(10*Math.random()))}},{key:"update",value:function(){this.detectHit(),this.radius=this.levels[this.level][0],this.speed=this.levels[this.level][1],this.move()}},{key:"detectHit",value:function(){var t=this;Object.keys(o.g.player.projectiles).forEach((function(e){var r=o.g.player.projectiles[e];t.hit(r)&&!1===r.used&&(r.used=!0,t.projectileHit(r))})),this.hit(o.g.player)?!1===this.overlay&&(this.overlay=!0,o.g.player.updateScore(-200)):this.overlay=!1}},{key:"projectileHit",value:function(t){delete o.g.player.projectiles[t.id],this.level>1?this.level-=1:delete P.rooms[o.g.player.room].enemies[this.id]}}])&&h(e.prototype,r),c}(n.Z);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=w(e);if(r){var n=w(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return v(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=n.call(this)).id=t,e.x=o.g.player.x,e.y=o.g.player.y,e.radius=o.g.background.canvas.height/15,e}return i}(r.Z);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(c,t);var e,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(n);if(i){var o=S(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return R(this,t)});function c(t,e){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=a.call(this)).up="",o.right="",o.down="",o.left="",o.endRoom=!1,o.visited=!1,o.availableDirections=4,o.treasure={},o.markers={},o.enemies={},o.id=t,o.up=o.id-e,o.right=o.id+1,o.down=o.id+e,o.left=o.id-1,o.id<e?(o.up=null,o.availableDirections--):o.id>=Math.pow(e,2)-e&&(o.availableDirections--,o.down=null),o.id%e==0?(o.availableDirections--,o.left=null):o.id%e==e-1&&(o.availableDirections--,o.right=null),o.generateTreasure(),o.generateEnemies(),o}return e=c,(r=[{key:"generateTreasure",value:function(){if(Math.random()<=.8){var t=Object.keys(this.treasure).length;this.treasure[t]=new l(t)}}},{key:"generateEnemies",value:function(){if(Math.random()<=1){var t=Object.keys(this.treasure).length;this.enemies[t]=new g(t)}}},{key:"changeRoom",value:function(t){return this[t]}},{key:"addMarker",value:function(){var t=Object.keys(this.markers).length;this.markers[t]=new k(t),o.g.background.draw()}}])&&O(e.prototype,r),c}(r.Z);P.rooms=[]},254:(t,e,o)=>{o.d(e,{Z:()=>l});var r=o(670),n=o(820);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(h,t);var e,r,i,l,f=(i=h,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(i);if(l){var o=s(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return u(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=f.call(this)).canvas=document.getElementById("canvas-foreground"),t.ctx=t.canvas.getContext("2d"),t.canvas.width=t.dimensions,t.canvas.height=t.dimensions,t}return e=h,(r=[{key:"update",value:function(){!0!==o.g.player.finished&&(this.clear(),o.g.player.move(),this.draw(),requestAnimationFrame(this.update.bind(this)))}},{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.arc(o.g.player.x,o.g.player.y,o.g.player.radius,0,2*Math.PI),this.ctx.fillStyle="purple",this.ctx.fill();var t=this;Object.keys(n.Z.rooms[o.g.player.room].treasure).forEach((function(e){var r=n.Z.rooms[o.g.player.room].treasure[e];r.update(),t.ctx.beginPath(),t.ctx.arc(r.x,r.y,r.radius,0,2*Math.PI),t.ctx.fillStyle="gold",t.ctx.fill()})),Object.keys(n.Z.rooms[o.g.player.room].enemies).forEach((function(e){var r=n.Z.rooms[o.g.player.room].enemies[e];r.update(),t.ctx.beginPath(),t.ctx.arc(r.x,r.y,r.radius,0,2*Math.PI),t.ctx.fillStyle="red",t.ctx.fill()})),Object.keys(o.g.player.projectiles).forEach((function(e){var r=o.g.player.projectiles[e];r.move(),t.ctx.beginPath(),t.ctx.arc(r.x,r.y,r.radius,0,2*Math.PI),t.ctx.fillStyle="blue",t.ctx.fill()}))}}])&&a(e.prototype,r),h}(r.Z)},673:(t,e,o)=>{o.r(e);var r=o(820),n=o(127),i=o(254);document.addEventListener("keydown",(function(t){"ArrowUp"===t.key||"Up"===t.key||"w"===t.key||"W"===t.key?o.g.player.dy=-o.g.player.speed:"ArrowRight"===t.key||"Right"===t.key||"d"===t.key||"D"===t.key?o.g.player.dx=o.g.player.speed:"ArrowDown"===t.key||"Down"===t.key||"s"===t.key||"S"===t.key?o.g.player.dy=o.g.player.speed:"ArrowLeft"===t.key||"Left"===t.key||"a"===t.key||"A"===t.key?o.g.player.dx=-o.g.player.speed:" "===t.key&&r.Z.rooms[o.g.player.room].addMarker()})),document.addEventListener("keyup",(function(t){"ArrowUp"!==t.key&&"UP"!==t.key&&"w"!==t.key&&"W"!==t.key&&"ArrowRight"!==t.key&&"Right"!==t.key&&"d"!==t.key&&"D"!==t.key&&"ArrowDown"!==t.key&&"Down"!==t.key&&"s"!==t.key&&"S"!==t.key&&"ArrowLeft"!==t.key&&"Left"!==t.key&&"a"!==t.key&&"A"!==t.key||(o.g.player.dx=0,o.g.player.dy=0)})),document.addEventListener("mousedown",(function(t){if(0===t.button&&t.clientY>=o.g.background.canvasRect.top&&t.clientY<=o.g.background.canvasRect.bottom&&t.clientX>=o.g.background.canvasRect.left&&t.clientX<=o.g.background.canvasRect.right){var e=t.clientX-o.g.background.canvasRect.x,r=t.clientY-o.g.background.canvasRect.y;o.g.player.fireProjectile(e,r)}})),window.onresize=function(){o.g.background=new n.Z,o.g.background.draw(),o.g.foreground=new i.Z,o.g.foreground.update(),o.g.player.resetPosition()}}},e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=o(127),e=o(254),r=o(557),n=o(820);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,r,n,i,l=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(i){var o=s(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return u(this,t)});function f(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this)).angle=0,n.speed=5,n.id=t,n.type="Projectile",n.x=o.g.player.x,n.y=o.g.player.y,n.radius=o.g.background.canvas.height/100,n.setDirection(e,r),n}return e=f,(r=[{key:"setDirection",value:function(t,e){this.angle=Math.atan((e-this.y)/(t-this.x)),this.dx=this.speed*Math.cos(this.angle),this.dy=this.speed*Math.sin(this.angle),t-this.x<0&&(this.dx*=-1,this.dy*=-1)}}])&&a(e.prototype,r),f}(o(548).Z);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,t);var e,r,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(i);if(a){var o=d(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return p(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).room=null,t.score=0,t.time=0,t.won=!1,t.projectileCounter=0,t.projectiles={},t.type="Player",t.x=o.g.background.canvas.width/2,t.y=o.g.background.canvas.height/2,t.radius=o.g.background.canvas.height/40,t.speed=5,t.startTimer(),t}return e=u,(r=[{key:"startTimer",value:function(){var t=Date.now();setInterval((function(){if(!0!==o.g.player.finished){var e=Date.now()-t;o.g.player.time=Math.floor(e/1e3),$("#time").text("Time:  "+o.g.player.time)}}),100)}},{key:"hitDoor",value:function(){var t={};return null!==n.Z.rooms[o.g.player.room].up&&this.y-this.radius+this.dy-o.g.background.ctx.lineWidth<0&&this.variableBetweenValues(this.x,o.g.background.doorMin,o.g.background.doorMax)?(t.direction="up",t.x=this.x,t.y=o.g.background.canvas.height-this.radius-o.g.background.ctx.lineWidth):null!==n.Z.rooms[o.g.player.room].right&&this.x+this.radius+this.dx+o.g.background.ctx.lineWidth>o.g.background.canvas.width&&this.variableBetweenValues(this.y,o.g.background.doorMin,o.g.background.doorMax)?(t.direction="right",t.x=this.radius+o.g.background.ctx.lineWidth,t.y=this.y):null!==n.Z.rooms[o.g.player.room].down&&this.y+this.radius+this.dy+o.g.background.ctx.lineWidth>o.g.background.canvas.height&&this.variableBetweenValues(this.x,o.g.background.doorMin,o.g.background.doorMax)?(t.direction="down",t.x=this.x,t.y=this.radius+o.g.background.ctx.lineWidth):null!==n.Z.rooms[o.g.player.room].left&&this.x-this.radius+this.dx-o.g.background.ctx.lineWidth<0&&this.variableBetweenValues(this.y,o.g.background.doorMin,o.g.background.doorMax)?(t.direction="left",t.x=o.g.background.canvas.width-this.radius-o.g.background.ctx.lineWidth,t.y=this.y):t=!1,!1!==t&&"end"===n.Z.rooms[o.g.player.room][t.direction]&&(this.playerWon(),t=!1),t}},{key:"playerWon",value:function(){this.finished=!0,$("#result").text("You Win!!!")}},{key:"fireProjectile",value:function(t,e){this.projectiles[this.projectileCounter]=new l(this.projectileCounter,t,e),this.projectileCounter++}},{key:"updateScore",value:function(t){this.score+=t,$("#score").text("Score:  "+this.score)}},{key:"resetPosition",value:function(){this.x=o.g.background.canvas.width/2,this.y=o.g.background.canvas.height/2}}])&&h(e.prototype,r),u}(r.Z);function b(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"setupGame",value:function(){n.Z.rooms=[];for(var t=0;t<Math.pow(o.g.settings.gridSize,2);t++)n.Z.rooms.push(new n.Z(t,o.g.settings.gridSize));for(var e=0;e<n.Z.rooms.length;e++)Math.random()<=o.g.settings.removed&&this.deleteRoom(e);o.g.player.room=this.generateRandomRoom(),this.generateRandomEndRoom(),this.mapInvalid()&&(console.log("rebuilding map"),this.setupGame()),n.Z.rooms[o.g.player.room].treasure={},n.Z.rooms[o.g.player.room].markers={},n.Z.rooms[o.g.player.room].enemies={},console.log("startroom",o.g.player.room)}},{key:"deleteRoom",value:function(t){var e=n.Z.rooms[t].up;null!==e&&(n.Z.rooms[e].down=null,n.Z.rooms[e].availableDirections--);var o=n.Z.rooms[t].right;null!==o&&(n.Z.rooms[o].left=null,n.Z.rooms[o].availableDirections--);var r=n.Z.rooms[t].down;null!==r&&(n.Z.rooms[r].up=null,n.Z.rooms[r].availableDirections--);var i=n.Z.rooms[t].left;null!==i&&(n.Z.rooms[i].right=null,n.Z.rooms[i].availableDirections--),n.Z.rooms[t]=null}},{key:"generateRandomRoom",value:function(){var t=Math.floor(Math.random()*Math.pow(o.g.settings.gridSize,2));return null!==n.Z.rooms[t]?t:this.generateRandomRoom()}},{key:"generateRandomEndRoom",value:function(){var t=this.generateRandomRoom();if(4!==n.Z.rooms[t].availableDirections&&t!==o.g.player.room){for(var e=!1,r=["up","right","down","left"],i=null,a=null;!1===e;)i=r[a=Math.floor(Math.random()*r.length)],null===n.Z.rooms[t][i]?(e=!0,n.Z.rooms[t][i]="end"):r.splice(a,1);n.Z.rooms[t].endRoom=!0,console.log("end room:  ",t)}else this.generateRandomEndRoom()}},{key:"getUnvisitedNeighbors",value:function(t){var e=[];return null!==n.Z.rooms[t].up&&"end"!==n.Z.rooms[t].up&&!1===n.Z.rooms[n.Z.rooms[t].up].visited&&e.push(n.Z.rooms[t].up),null!==n.Z.rooms[t].right&&"end"!==n.Z.rooms[t].right&&!1===n.Z.rooms[n.Z.rooms[t].right].visited&&e.push(n.Z.rooms[t].right),null!==n.Z.rooms[t].down&&"end"!==n.Z.rooms[t].down&&!1===n.Z.rooms[n.Z.rooms[t].down].visited&&e.push(n.Z.rooms[t].down),null!==n.Z.rooms[t].left&&"end"!==n.Z.rooms[t].left&&!1===n.Z.rooms[n.Z.rooms[t].left].visited&&e.push(n.Z.rooms[t].left),e}},{key:"mapInvalid",value:function(){for(var t=o.g.player.room,e=null,r=[],i=!0,a=Math.pow(o.g.settings.gridSize,2);;)if(n.Z.rooms[t].visited=!0,!0===n.Z.rooms[t].endRoom&&(i=!1),(e=this.getUnvisitedNeighbors(t)).length>0)r.push(t),t=e[0];else{if(!(r.length>0))break;t=r.pop()}for(var c=0;c<n.Z.rooms.length;c++)null===n.Z.rooms[c]?a--:!1===n.Z.rooms[c].visited&&(a--,n.Z.rooms[c]=null);return a<o.g.settings.minimumNodes&&(i=!0),console.log("available nodes:   ",a),i}}])&&b(e.prototype,r),t}();o(673),o.g.settings={},o.g.background=new t.Z,o.g.player=new g,o.g.foreground=new e.Z,fetch("./configuration.txt").then((function(t){return t.text()})).then((function(t){(function(t){var e=JSON.parse(t);return e.minimumNodes<Math.pow(e.gridSize,2)*e.removed&&(o.g.settings=e,!0)})(t)?((new m).setupGame(),o.g.background.draw(),o.g.foreground.update()):console.log("invalid configuration")}))})()})();